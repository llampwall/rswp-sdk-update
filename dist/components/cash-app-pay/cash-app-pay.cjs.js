"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var v=require("react"),P=require("../../contexts/form/form.cjs.js");function R(e){if(e&&e.__esModule)return e;var a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}}),a.default=e,Object.freeze(a)}var n=R(v);function A({callbacks:e,id:a="rswps-cash-app-pay",redirectURL:r,referenceId:o,shape:f="round",size:l="medium",values:d="dark",width:m="static",...j}){const[y,q]=n.useState(),{createPaymentRequest:c,payments:p}=P.useForm(),w=n.useMemo(()=>({redirectURL:r||window.location.href,referenceId:o}),[r,o]),b=n.useMemo(()=>{const t={shape:f,size:l,values:d,width:m};return Object.keys(t).reduce((s,i)=>(t[i]!==void 0&&(s[i]=t[i]),s),{})},[f,l,d,m]);if(n.useEffect(()=>{const t=async()=>{await y?.destroy()};return()=>{t()}},[]),n.useEffect(()=>{if(!c)throw new Error("`createPaymentRequest()` is required when using digital wallets");const t=new AbortController,{signal:s}=t;return(async h=>{const g=p?.paymentRequest(c);if(!g)throw new Error("`paymentRequest` is required when using digital wallets");try{const u=await p?.cashAppPay(g,w).then(O=>{if(!h?.aborted)return q(O),O});await u?.attach(`#${a}`,b),h.aborted&&await u?.destroy()}catch(u){console.error("Initializing Cash App Pay failed",u)}})(s),()=>{t.abort()}},[c,b,w,p]),e)for(const t of Object.keys(e))y?.addEventListener(t.toLowerCase(),e[t]);return n.createElement("div",{...j,id:a})}exports.default=A;
//# sourceMappingURL=cash-app-pay.cjs.js.map
